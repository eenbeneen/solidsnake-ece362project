.program hub75_shift
; OUT: 6 data pins (R1,G1,B1,R2,G2,B2)
; SIDESET: 1 pin (CLK)
.side_set 1

.wrap_target
    pull block       side 0     ; wait until CPU provides first word for this row
    set x, 63        side 0     ; 64 pixels

loop:
    out pins, 6      side 0     ; data valid, CLK low
    nop              side 1     ; CLK high
    nop              side 0     ; CLK low
    jmp x--, loop    side 0     ; next pixel

    irq 0            side 0     ; signal "done shifting this row"
.wrap
